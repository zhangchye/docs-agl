<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta name="description" content=" ">

    <title>
	    AGL Developer Site - 
        
            
                Usage Guide  -
            
        
    </title>

    <link rel="SHORTCUT ICON" href="/favicon.ico"/>

    

    
    

    <link rel="canonical" href="http://docs.automotivelinux.org/docs/apis_services/en/dev/reference/signaling/low-can-usage-guide.html">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/static/styles/main.css">
    <link rel="stylesheet" type="text/css" href="/static/styles/syntax.css">
    <!-- Algolia Search CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />

    <!-- Fonts -->
    <!-- For attribution information, see www/attributions.html -->
    <link href='https://fonts.googleapis.com/css?family=Raleway:700,400,300,700italic,400italic,300italic' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- <script defer type="text/javascript">
        var disqus_developer = ; // this would set it to developer mode
    </script>-->

    <!-- JS -->
    <script defer type="text/javascript" src="/static/js/lib/jquery-2.1.1.min.js"></script>
    <script defer type="text/javascript" src="/static/js/lib/bootstrap.min.js"></script>
<!--    <script defer type="text/javascript" src="/static/js/lib/ZeroClipboard.js"></script>-->

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', '{}', 'auto');
    ga('send', 'pageview');
</script>

</head>

<body>
    <header>
    <a class="scroll-point pt-top" name="top"></a>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="/"><img id="logo_top" src="/static/img/branding/agl_title_793x211.png"/></a>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <div class="nav_bar_left">
                    <ul class="nav navbar-nav">
                        <li >
                            <a href="/docs/getting_started/en/dev/">Getting Started</a>
                        </li>
                                                
                        <li >
                            <a href="/docs/architecture/en/dev/">Architecture Guides</a>
                        </li>

                        <li >
                            <a href="/docs/hardware/en/dev/">Hardware Support</a>
                        </li>

                        <li >
                            <a href="/docs/devguides/en/dev/">Developer Guides</a>
                        </li>
                        
                        <li >
                            <a href="/docs/apis_services/en/dev/">APIs & Services</a>
                        </li>
					</ul>
				</div>
                <div class="nav_bar_right">
                    <ul class="nav navbar-nav">
                        <li >
                            <a href="/techpost" id="blog_button">TechPost<span class="badge" id="new_blog_count"></span></a>
                        </li>
                        <li >
                            <a href="/contribute">Contribute</a>
                        </li>
                        <li>
                            <form class="navbar-form navbar-right" id="header-search-form" role="search">
                                <div class="input-group">
                                    
                                    <input id="header-search-field" type="text" placeholder="Search 'dev' docs..." class="form-control hidden-xs" autocomplete="off">
                                </div>
                            </form>
                        </li>
                    </ul>
                </div>
            </div><!--/.navbar-collapse -->
        </div>
    </nav>
    <div id="_fixed_navbar_spacer" style="padding-top:50px"></div>
</header>














<div class="docs container">

    <!-- Table of Contents -->
    <div class="hidden-xs hidden-sm col-md-4 col-lg-3 site-toc-container">
        <ul class="site-toc">
    

    <li>
        
            <span class="toc-section-heading">
                Application Framework
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/0-introduction.html">
                Introduction
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/1-afm-daemons.html">
                The afm daemons
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/2-widgets.html">
                Widgets
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/2.1-widgets.html">
                Overview of widgets
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/2.2-config.xml.html">
                Widget configuration file
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/3-permissions.html">
                Permissions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-main/4-quick-tutorial.html">
                Quick Tutorial
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Application Framework Binder
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-overview.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-daemon-vocabulary.html">
                Binder daemon vocabulary
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-binding-writing.html">
                How to write a binding ?
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Binder references
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/types-and-globals.html">
                Types and globals
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/macro-log.html">
                Macros for logging
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/func-api.html">
                Functions of class afb_api
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/func-req.html">
                Functions of class afb_req
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/func-event.html">
                Functions of class afb_event
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/func-daemon.html">
                Functions of class afb_daemon
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/reference-v3/func-service.html">
                Functions of class afb_service
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-events-guide.html">
                Binder events guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-application-writing.html">
                Binder Application writing guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Annexes
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-migration-to-binding-v3.html">
                Migration to bindings v3
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/protocol-x-afb-ws-json1.html">
                WebSocket protocol x-afb-ws-json1
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-desktop-package.html">
                Installing the binder on a desktop
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-daemon-options.html">
                Options of afb-daemon
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/afb-daemon-debugging.html">
                Debugging binder and bindings
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/legacy/afb-migration-v1-to-v2.html">
                LEGACY Migration from v1 to v2
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/af-binder/legacy/afb-binding-v2-references.html">
                LEGACY Binding V2 references
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/REVISIONS.html">
                
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Message Signaling
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/architecture.html">
                Signaling Architecture
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Low level CAN service Guide
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/low-can-architecture.html">
                Architecture presentation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/low-can-installation-guide.html">
                Installation Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="this-page" href="/docs/apis_services/en/dev/reference/signaling/low-can-usage-guide.html">
                Usage Guide
            </a>
            
                <span class="entry-highlight"></span>
            
        

        
        <div id="page-toc" class="page-toc"></div>

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                High level ViWi service Guide
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/high-viwi-architecture.html">
                Architecture presentation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/high-viwi-install-usage-guide.html">
                Installation and Usage Guide
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Signal Composer service Guide
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/signal-composer-architecture.html">
                Architecture presentation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/signal-composer-configuration.html">
                Configuration
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/signal-composer-plugins.html">
                Plugins
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/signal-composer-api.html">
                Signal Composer API
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/iotbzh2016/signaling/AGL-Message-Signaling-Developer-Guidelines.pdf">
                Developer Guidelines
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/iotbzh2016/signaling/AGL-AppFW-CAN-Signaling-Benchmark.pdf">
                CAN Signaling Benchmark
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                CanDevStudio Quickstart
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/candevstudio/docs/1_Usage.html">
                Usage Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/candevstudio/docs/2_can_device_socketcan_backend.html">
                Bringing up a CAN device using socketcan backend
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/candevstudio/docs/3_Add_CAN_Device.html">
                Add a CAN device in CANdevStudio
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/candevstudio/docs/4_Configure_CanRawSender_Node.html">
                Configure a CanRawSender node
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/candevstudio/docs/5_Using_CanRawView.html">
                Using CanRawView
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/signaling/resources.html">
                Resources
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Audio Framework
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/4a-framework.html">
                4a-framework
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/audio/bluez-alsa.html">
                bluez-alsa
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                HMI Framework
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/hmi-framework/3_1-HomeScreen-Guide.html">
                Home Screen Developper Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/hmi-framework/3_2-WindowManager-Guide.html">
                Window Manager Developper Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/hmi-framework/3_3-SoundManager-Guide.html">
                Sound Manager Developper Guide
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                HomeScreen (old)
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/apis_services/en/dev/reference/homescreen/homescreen_api.html">
                HomeScreen API
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

    </div>

    <!-- Page content -->
    <div class="col-md-8 col-md-offset-4 col-lg-9 col-lg-offset-3 page-content-container container">
        <div class="page-content row">
            <div class="col-md-offset-1 col-md-10">
                <div class="content-header">

                    <!-- ToC Dropdown (for XS and SM sizes only) -->
                    <div class="toc-dropdown dropdown visible-xs-block visible-sm-block">
                        <button class="btn btn-default dropdown-toggle" type="button" id="tocDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Table of Contents
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            






<li>
    <a class="" href="reference/af-main/0-introduction.html">
        Introduction
    </a>
</li>




<li>
    <a class="" href="reference/af-main/1-afm-daemons.html">
        The afm daemons
    </a>
</li>




<li>
    <a class="" href="reference/af-main/2-widgets.html">
        Widgets
    </a>
</li>




<li>
    <a class="" href="reference/af-main/2.1-widgets.html">
        Overview of widgets
    </a>
</li>




<li>
    <a class="" href="reference/af-main/2.2-config.xml.html">
        Widget configuration file
    </a>
</li>




<li>
    <a class="" href="reference/af-main/3-permissions.html">
        Permissions
    </a>
</li>




<li>
    <a class="" href="reference/af-main/4-quick-tutorial.html">
        Quick Tutorial
    </a>
</li>











<li>
    <a class="" href="reference/af-binder/afb-overview.html">
        Overview
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/afb-daemon-vocabulary.html">
        Binder daemon vocabulary
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/afb-binding-writing.html">
        How to write a binding ?
    </a>
</li>








<li>
    <a class="" href="reference/af-binder/reference-v3/types-and-globals.html">
        Types and globals
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/reference-v3/macro-log.html">
        Macros for logging
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/reference-v3/func-api.html">
        Functions of class afb_api
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/reference-v3/func-req.html">
        Functions of class afb_req
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/reference-v3/func-event.html">
        Functions of class afb_event
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/reference-v3/func-daemon.html">
        Functions of class afb_daemon
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/reference-v3/func-service.html">
        Functions of class afb_service
    </a>
</li>







<li>
    <a class="" href="reference/af-binder/afb-events-guide.html">
        Binder events guide
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/afb-application-writing.html">
        Binder Application writing guide
    </a>
</li>








<li>
    <a class="" href="reference/af-binder/afb-migration-to-binding-v3.html">
        Migration to bindings v3
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/protocol-x-afb-ws-json1.html">
        WebSocket protocol x-afb-ws-json1
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/afb-desktop-package.html">
        Installing the binder on a desktop
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/afb-daemon-options.html">
        Options of afb-daemon
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/afb-daemon-debugging.html">
        Debugging binder and bindings
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/legacy/afb-migration-v1-to-v2.html">
        LEGACY Migration from v1 to v2
    </a>
</li>




<li>
    <a class="" href="reference/af-binder/legacy/afb-binding-v2-references.html">
        LEGACY Binding V2 references
    </a>
</li>







<li>
    <a class="" href="REVISIONS.html">
        
    </a>
</li>











<li>
    <a class="" href="reference/signaling/architecture.html">
        Signaling Architecture
    </a>
</li>








<li>
    <a class="" href="reference/signaling/low-can-architecture.html">
        Architecture presentation
    </a>
</li>




<li>
    <a class="" href="reference/signaling/low-can-installation-guide.html">
        Installation Guide
    </a>
</li>




<li>
    <a class="this-page" href="reference/signaling/low-can-usage-guide.html">
        Usage Guide
    </a>
</li>











<li>
    <a class="" href="reference/signaling/high-viwi-architecture.html">
        Architecture presentation
    </a>
</li>




<li>
    <a class="" href="reference/signaling/high-viwi-install-usage-guide.html">
        Installation and Usage Guide
    </a>
</li>











<li>
    <a class="" href="reference/signaling/signal-composer-architecture.html">
        Architecture presentation
    </a>
</li>




<li>
    <a class="" href="reference/signaling/signal-composer-configuration.html">
        Configuration
    </a>
</li>




<li>
    <a class="" href="reference/signaling/signal-composer-plugins.html">
        Plugins
    </a>
</li>




<li>
    <a class="" href="reference/signaling/signal-composer-api.html">
        Signal Composer API
    </a>
</li>







<li>
    <a class="" href="reference/iotbzh2016/signaling/AGL-Message-Signaling-Developer-Guidelines.pdf">
        Developer Guidelines
    </a>
</li>




<li>
    <a class="" href="reference/iotbzh2016/signaling/AGL-AppFW-CAN-Signaling-Benchmark.pdf">
        CAN Signaling Benchmark
    </a>
</li>








<li>
    <a class="" href="reference/candevstudio/docs/1_Usage.html">
        Usage Guide
    </a>
</li>




<li>
    <a class="" href="reference/candevstudio/docs/2_can_device_socketcan_backend.html">
        Bringing up a CAN device using socketcan backend
    </a>
</li>




<li>
    <a class="" href="reference/candevstudio/docs/3_Add_CAN_Device.html">
        Add a CAN device in CANdevStudio
    </a>
</li>




<li>
    <a class="" href="reference/candevstudio/docs/4_Configure_CanRawSender_Node.html">
        Configure a CanRawSender node
    </a>
</li>




<li>
    <a class="" href="reference/candevstudio/docs/5_Using_CanRawView.html">
        Using CanRawView
    </a>
</li>







<li>
    <a class="" href="reference/signaling/resources.html">
        Resources
    </a>
</li>











<li>
    <a class="" href="reference/audio/4a-framework.html">
        4a-framework
    </a>
</li>




<li>
    <a class="" href="reference/audio/bluez-alsa.html">
        bluez-alsa
    </a>
</li>











<li>
    <a class="" href="reference/hmi-framework/3_1-HomeScreen-Guide.html">
        Home Screen Developper Guide
    </a>
</li>




<li>
    <a class="" href="reference/hmi-framework/3_2-WindowManager-Guide.html">
        Window Manager Developper Guide
    </a>
</li>




<li>
    <a class="" href="reference/hmi-framework/3_3-SoundManager-Guide.html">
        Sound Manager Developper Guide
    </a>
</li>











<li>
    <a class="" href="reference/homescreen/homescreen_api.html">
        HomeScreen API
    </a>
</li>







                        </ul>
                    </div>

                    <!--
                    
                    
                        <a class="edit" href=""><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a>

                    
                    
                    -->

                    <!-- Language dropdown -->
                    <!--
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="languageDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            
                            <span class="caret"></span>
                        </button>

                        <!-- List all languages - ->
                        <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                            
                        </ul>
                    </div>
                    -->

                    <!-- Version dropdown -->
                    <!--
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="versionDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            dev
                            
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="versionDropdown">

                            <!-- List versions available in this language - ->
                            
                        </ul>
                    </div>
                    -->
                </div>
                

                
                
                

                
                

                <!-- Show warnings for special versions -->
                <!-- dev warning
                
                    <div class="alert docs-alert alert-info" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        Draft version of documentation under development may change!
                        <a href="/docs/en/latest/">
                            Click here for the latest released version.
                        </a>
                    </div>
                
                -->

                <!-- outdated warning
                
                -->


                <div id="page-toc-source">
                    <!-- WARNING: This file is generated by fetch_docs.js using /w/workspace/sandbox-doc-update/webdocs-agl/content/tocs/apis_services/fetched_files.yml -->

<h1 id="configure-the-agl-system">Configure the AGL system</h1>

<h2 id="virtual-can-device">Virtual CAN device</h2>

<p>Connected to the target, here is how to load the virtual CAN device driver and
set up a new vcan device :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>modprobe vcan
ip link add vcan0 <span class="nb">type </span>vcan
ip link <span class="nb">set </span>vcan0 up
</code></pre>
</div>

<p>You also can named your linux CAN device like you want and if you need name it
<code class="highlighter-rouge">can0</code> :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>modprobe vcan
ip link add can0 <span class="nb">type </span>vcan
ip link <span class="nb">set </span>can0 up
</code></pre>
</div>

<h2 id="can-device-using-the-usb-can-adapter">CAN device using the USB CAN adapter</h2>

<p>Using real connection to CAN bus of your car using the USB CAN adapter
connected to the OBD2 connector.</p>

<p>Once connected, launch <code class="highlighter-rouge">dmesg</code> command and search which device to use:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>dmesg
<span class="o">[</span>...]
<span class="o">[</span>  131.871441] usb 1-3: new full-speed USB device number 4 using ohci-pci
<span class="o">[</span>  161.860504] can: controller area network core <span class="o">(</span>rev 20120528 abi 9<span class="o">)</span>
<span class="o">[</span>  161.860522] NET: Registered protocol family 29
<span class="o">[</span>  177.561620] usb 1-3: USB disconnect, device number 4
<span class="o">[</span>  191.061423] usb 1-2: USB disconnect, device number 3
<span class="o">[</span>  196.095325] usb 1-2: new full-speed USB device number 5 using ohci-pci
<span class="o">[</span>  327.568882] usb 1-2: USB disconnect, device number 5
<span class="o">[</span>  428.594177] CAN device driver interface
<span class="o">[</span> 1872.551543] usb 1-2: new full-speed USB device number 6 using ohci-pci
<span class="o">[</span> 1872.809302] usb_8dev 1-2:1.0 can0: firmware: 1.7, hardware: 1.0
<span class="o">[</span> 1872.809356] usbcore: registered new interface driver usb_8dev
</code></pre>
</div>

<p>Here device is named <code class="highlighter-rouge">can0</code>.</p>

<p>This instruction assuming a speed of 500000kbps for your CAN bus, you can try
others supported bitrate like 125000, 250000 if 500000 doesn’t work:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ip link <span class="nb">set </span>can0 <span class="nb">type </span>can bitrate 500000
ip link <span class="nb">set </span>can0 up
ip link show can0
  can0: &lt;NOARP,UP,LOWER_UP,ECHO&gt; mtu 16 qdisc pfifo_fast state UNKNOWN qlen 10
    link/can
    can state ERROR-ACTIVE <span class="o">(</span>berr-counter tx 0 rx 0<span class="o">)</span> restart-ms 0
    bitrate 500000 sample-point 0.875
    tq 125 prop-seg 6 phase-seg1 7 phase-seg2 2 sjw 1
    sja1000: tseg1 1..16 tseg2 1..8 sjw 1..4 brp 1..64 brp-inc 1
    clock 16000000
</code></pre>
</div>

<p>On a Rcar Gen3 board, you’ll have your CAN device as <code class="highlighter-rouge">can1</code> because <code class="highlighter-rouge">can0</code>
already exists as an embedded device.</p>

<p>The instructions will be the same:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ip link <span class="nb">set </span>can1 <span class="nb">type </span>can bitrate 500000
ip link <span class="nb">set </span>can1 up
ip link show can1
  can0: &lt;NOARP,UP,LOWER_UP,ECHO&gt; mtu 16 qdisc pfifo_fast state UNKNOWN qlen 10
    link/can
    can state ERROR-ACTIVE <span class="o">(</span>berr-counter tx 0 rx 0<span class="o">)</span> restart-ms 0
    bitrate 500000 sample-point 0.875
    tq 125 prop-seg 6 phase-seg1 7 phase-seg2 2 sjw 1
    sja1000: tseg1 1..16 tseg2 1..8 sjw 1..4 brp 1..64 brp-inc 1
    clock 16000000
</code></pre>
</div>

<h2 id="rename-an-existing-can-device">Rename an existing CAN device</h2>

<p>You can rename an existing CAN device using following command and doing so move
an existing <code class="highlighter-rouge">can0</code> device to anything else and then use another device as <code class="highlighter-rouge">can0</code>
. For a Rcar Gen3 board do the following by example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo ip link <span class="nb">set </span>can0 down
sudo ip link <span class="nb">set </span>can0 name bsp-can0
sudo ip link <span class="nb">set </span>bsp-can0 up
</code></pre>
</div>

<p>Then connect your USB CAN device that will be named <code class="highlighter-rouge">can0</code> by default.</p>

<h1 id="configure-the-binding">Configure the binding</h1>

<p>The binding reads system configuration file <em>/etc/dev-mapping.conf</em> at start to
map logical name from signals described in JSON file to linux devices name
initialized by the system.</p>

<p>Edit file <em>/etc/dev-mapping.conf</em> and add mapping in section <code class="highlighter-rouge">CANbus-mapping</code>.</p>

<p>Default binding configuration use a CAN bus named <code class="highlighter-rouge">hs</code> so you need to map it to
the real one, here are some examples:</p>

<ul>
  <li>Using virtual CAN device as described in the previous chapter:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nn">[CANbus-mapping]</span>
<span class="py">hs</span><span class="p">=</span><span class="s">"vcan0"</span>
<span class="py">ls</span><span class="p">=</span><span class="s">"vcan1"</span>
</code></pre>
</div>

<ul>
  <li>Using real CAN device, this example assume CAN bus traffic will be on can0.</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nn">[CANbus-mapping]</span>
<span class="py">hs</span><span class="p">=</span><span class="s">"can0"</span>
<span class="py">ls</span><span class="p">=</span><span class="s">"can1"</span>
</code></pre>
</div>

<ul>
  <li>On a Rcar Gen3 board there is an embedded CAN device so <code class="highlighter-rouge">can0</code> already exists. So you might want to use your USB CAN adapter plugged to the OBD2 connector, in this case use <code class="highlighter-rouge">can1</code>:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nn">[CANbus-mapping]</span>
<span class="py">hs</span><span class="p">=</span><span class="s">"can1"</span>
</code></pre>
</div>

<blockquote>
  <p><strong>CAUTION VERY IMPORTANT:</strong> Make sure the CAN bus(es) you specify in your
configuration file match those specified in your generated source file with
the <code class="highlighter-rouge">CAN-config-generator</code>.</p>
</blockquote>

<h1 id="run-it-test-it-use-it">Run it, test it, use it.</h1>

<p>You can run the binding using <strong>afm-util</strong> tool, here is the classic way to go :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>afm-util run low-can-service@4.0
1
</code></pre>
</div>

<p>You can find instructions to use afm-util tool
<a href="http://docs.iot.bzh/docs/apis_services/en/dev/reference/af-main/afm-daemons.html#using-afm-util">here</a>,
 as well as documentation about Application Framework.</p>

<p>But you can’t control nor interact with it because you don’t know security
token that <strong>Application Framework</strong> gaves it at launch.</p>

<p>So, to test it, it is better to launch the binding manually. In the following
example, it will use port <strong>1234</strong> and left empty security token for testing
purpose:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>afb-daemon --binding<span class="o">=</span>/var/lib/afm/applications/low-can-service/4.0/lib/afb-low-can.so --rootdir<span class="o">=</span>/var/lib/afm/applications/low-can-service/4.0/ --port<span class="o">=</span>1234 --token<span class="o">=</span>1
NOTICE: binding <span class="o">[</span>/usr/lib/afb/afb-dbus-binding.so] calling registering <span class="k">function </span>afbBindingV1Register
NOTICE: binding /usr/lib/afb/afb-dbus-binding.so loaded with API prefix dbus
NOTICE: binding <span class="o">[</span>/usr/lib/afb/authLogin.so] calling registering <span class="k">function </span>afbBindingV1Register
NOTICE: binding /usr/lib/afb/authLogin.so loaded with API prefix auth
NOTICE: binding <span class="o">[</span>/var/lib/afm/applications/low-can-service/4.0/libs//low-can-binding.so] calling registering <span class="k">function </span>afbBindingV1Register
NOTICE: binding /var/lib/afm/applications/low-can-service/4.0/libs//low-can-binding.so loaded with API prefix low-can
NOTICE: Waiting <span class="nv">port</span><span class="o">=</span>1234 <span class="nv">rootdir</span><span class="o">=</span>/var/lib/afm/applications/low-can-service/4.0/
NOTICE: Browser <span class="nv">URL</span><span class="o">=</span> http:/<span class="k">*</span>localhost:1234
</code></pre>
</div>

<p>On another terminal, connect to the binding using previously installed
<strong>AFB Websocket CLI</strong> tool:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>afb-client-demo ws://localhost:1234/api?token<span class="o">=</span>1
</code></pre>
</div>

<p>You will be on an interactive session where you can communicate directly with
the binding API.</p>

<p>The binding provides at this moment 2 verbs, <em>subscribe</em> and <em>unsubscribe</em>,
which can take argument by a JSON <strong>event</strong> object.</p>

<p>The argument value is the CAN message <strong>generic_name</strong> as described in the
JSON file used to generate cpp file for the binding.</p>

<p>To use the <em><strong>AFB Websocket CLI</strong></em> tool, a command line will be like the
following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;api&gt; &lt;verb&gt; &lt;arguments&gt;
</code></pre>
</div>

<p>Where:</p>

<ul>
  <li>API : <em><strong>low-can</strong></em>.</li>
  <li>Verb : <em><strong>subscribe</strong></em> or <em><strong>unsubscribe</strong></em></li>
  <li>Arguments : <em><strong>{ “event”: “driver.doors.open” }</strong></em></li>
</ul>

<h2 id="subscription-and-unsubscription">Subscription and unsubscription</h2>

<p>You can ask to subscribe to chosen CAN event with a call to <em>subscribe</em> API
verb with the CAN messages name as JSON argument.</p>

<blockquote>
  <p><strong>NOTE:</strong> If no argument is provided, then you’ll subscribe to all signals
at once.</p>
</blockquote>

<p>For example from a websocket session:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="err">low-can</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doors.driver.open"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="err">ON-REPLY</span><span class="w"> </span><span class="mi">1</span><span class="err">:low-can/subscribe:</span><span class="w"> </span><span class="p">{</span><span class="nt">"jtype"</span><span class="p">:</span><span class="s2">"afb-reply"</span><span class="p">,</span><span class="nt">"request"</span><span class="p">:{</span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="nt">"uuid"</span><span class="p">:</span><span class="s2">"a18fd375-b6fa-4c0e-a1d4-9d3955975ae8"</span><span class="p">}}</span><span class="w">
</span></code></pre>
</div>

<p>Subscription and unsubscription can take wildcard in their <em>event</em> value.</p>

<p>To receive all doors events :</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="err">low-can</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"event"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"doors*"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="err">ON-REPLY</span><span class="w"> </span><span class="mi">1</span><span class="err">:low-can/subscribe:</span><span class="w"> </span><span class="p">{</span><span class="nt">"jtype"</span><span class="p">:</span><span class="s2">"afb-reply"</span><span class="p">,</span><span class="nt">"request"</span><span class="p">:{</span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="nt">"uuid"</span><span class="p">:</span><span class="s2">"511c872e-d7f3-4f3b-89c2-aa9a3e9fbbdb"</span><span class="p">}}</span><span class="w">
</span></code></pre>
</div>

<p>Then you will receive an event each time a CAN message is decoded for the event
named <em>doors.driver.open</em> with its received timestamp if available:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="err">ON-EVENT</span><span class="w"> </span><span class="err">low-can/messages.doors.driver.open(</span><span class="p">{</span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"low-can\/messages.doors.driver.open"</span><span class="p">,</span><span class="nt">"data"</span><span class="p">:{</span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"messages.doors.driver.open"</span><span class="p">,</span><span class="nt">"value"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1505812906020023</span><span class="p">},</span><span class="nt">"jtype"</span><span class="p">:</span><span class="s2">"afb-event"</span><span class="p">}</span><span class="err">)</span><span class="w">
</span></code></pre>
</div>

<p>Notice that event shows you that the CAN event is named
<em>messages.doors.driver.open</em> but you ask for event about
<em>doors.driver.open</em>.</p>

<p>This is because all CAN messages or diagnostic messages are prefixed by the
JSON parent node name, <strong>messages</strong> for CAN messages and
<strong>diagnostic_messages</strong> for diagnostic messages like OBD2.</p>

<p>This will let you subscribe or unsubcribe to all signals at once, not
recommended, and better make filter on subscribe operation based upon their type. Examples:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="err">low-can</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"event"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"*speed*"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="err">--&gt;</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">speed</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">their</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">Search</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">make</span><span class="w"> </span><span class="err">without</span><span class="w"> </span><span class="err">prefix</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">it.</span><span class="w">
</span><span class="err">low-can</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"event"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"speed*"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="err">--&gt;</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">begin</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">speed</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">their</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">Search</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">make</span><span class="w"> </span><span class="err">without</span><span class="w"> </span><span class="err">prefix</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">it.</span><span class="w">
</span><span class="err">low-can</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"event"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"messages*speed*"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="err">--&gt;</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">CAN</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">speed</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">their</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">Search</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">prefixed</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">here.</span><span class="w">
</span><span class="err">low-can</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"event"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"messages*speed"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="err">--&gt;</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">CAN</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">ending</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">speed</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">their</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">Search</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">prefixed</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">here.</span><span class="w">
</span><span class="err">low-can</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"event"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"diagnostic*speed*"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="err">--&gt;</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">diagnostic</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">speed</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">their</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">Search</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">prefixed</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">here.</span><span class="w">
</span><span class="err">low-can</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"event"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"diagnostic*speed"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="err">--&gt;</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">diagnostic</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">ending</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">speed</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">their</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">Search</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">prefixed</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">here.</span><span class="w">
</span></code></pre>
</div>

<p>You can stop receiving event from it by unsubscribe the signal the same way you did for subscribe</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="err">low-can</span><span class="w"> </span><span class="err">unsubscribe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"doors.driver.open"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="err">ON-REPLY</span><span class="w"> </span><span class="mi">2</span><span class="err">:low-can/unsubscribe:</span><span class="w"> </span><span class="p">{</span><span class="nt">"jtype"</span><span class="p">:</span><span class="s2">"afb-reply"</span><span class="p">,</span><span class="nt">"request"</span><span class="p">:{</span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">}}</span><span class="w">
</span><span class="err">low-can</span><span class="w"> </span><span class="err">unsubscribe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"event"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"doors*"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="err">ON-REPLY</span><span class="w"> </span><span class="mi">3</span><span class="err">:low-can/unsubscribe:</span><span class="w"> </span><span class="p">{</span><span class="nt">"jtype"</span><span class="p">:</span><span class="s2">"afb-reply"</span><span class="p">,</span><span class="nt">"request"</span><span class="p">:{</span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">}}</span><span class="w">
</span></code></pre>
</div>

<h3 id="filtering-capabilities">Filtering capabilities</h3>

<p>It is possible to limits received event notifications into minimum and maximum
boundaries as well as doing frequency thinning. This is possible using the
argument filter with one or more of the filters available :</p>

<ul>
  <li>frequency: specify in Hertz the frequency which will be used to getting
 notified of new CAN events for the designated signal. If, during the blocked
 time, further changed CAN messages are received, the last valid one will be
 transferred after the lockout with a RX_CHANGED.</li>
  <li>min: Minimum value that the decoded value needs to be above to get pushed to
 the subscribed client(s).</li>
  <li>max: Maximum value that the decoded value needs to be below to get pushed to
 the subscribed client(s)</li>
</ul>

<p>Order doesn’t matter neither the number of filters chosen, you can use one, two
or all of them at once.</p>

<p>Usage examples :</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="err">low-can</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="p">{</span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"messages.engine.speed"</span><span class="p">,</span><span class="w"> </span><span class="nt">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nt">"min"</span><span class="p">:</span><span class="w"> </span><span class="mi">1250</span><span class="p">,</span><span class="w"> </span><span class="nt">"max"</span><span class="p">:</span><span class="w"> </span><span class="mi">3500</span><span class="p">}}</span><span class="w">
</span><span class="err">low-can</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="p">{</span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"messages.engine.load"</span><span class="p">,</span><span class="w"> </span><span class="nt">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"min"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="nt">"max"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">}}</span><span class="w">
</span><span class="err">low-can</span><span class="w"> </span><span class="err">subscribe</span><span class="w"> </span><span class="p">{</span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"messages.vehicle.speed"</span><span class="p">,</span><span class="w"> </span><span class="nt">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}}</span><span class="w">
</span></code></pre>
</div>

<h2 id="get-last-signal-value-and-list-of-configured-signals">Get last signal value and list of configured signals</h2>

<p>You can also ask for a particular signal value on one shot using <strong>get</strong> verb, like
this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="err">low-can</span><span class="w"> </span><span class="err">get</span><span class="w"> </span><span class="p">{</span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"messages.engine.speed"</span><span class="p">}</span><span class="w">
</span><span class="err">ON-REPLY</span><span class="w"> </span><span class="mi">1</span><span class="err">:low-can/get:</span><span class="w"> </span><span class="p">{</span><span class="nt">"response"</span><span class="p">:[{</span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"messages.engine.speed"</span><span class="p">,</span><span class="nt">"value"</span><span class="p">:</span><span class="mi">0</span><span class="p">}],</span><span class="nt">"jtype"</span><span class="p">:</span><span class="s2">"afb-reply"</span><span class="p">,</span><span class="nt">"request"</span><span class="p">:{</span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">}}</span><span class="w">
</span></code></pre>
</div>

<blockquote>
  <p><strong>CAUTION</strong> Only one event could be requested.</p>
</blockquote>

<p>Also, if you want to know the supported CAN signals loaded by <strong>low-can</strong>, use
verb <strong>list</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="err">low-can</span><span class="w"> </span><span class="err">list</span><span class="w">
</span><span class="err">ON-REPLY</span><span class="w"> </span><span class="mi">2</span><span class="err">:low-can/list:</span><span class="w"> </span><span class="p">{</span><span class="nt">"response"</span><span class="p">:[</span><span class="s2">"messages.hvac.fan.speed"</span><span class="p">,</span><span class="s2">"messages.hvac.temperature.left"</span><span class="p">,</span><span class="s2">"messages.hvac.temperature.right"</span><span class="p">,</span><span class="s2">"messages.hvac.temperature.average"</span><span class="p">,</span><span class="s2">"messages.engine.speed"</span><span class="p">,</span><span class="s2">"messages.fuel.level.low"</span><span class="p">,</span><span class="s2">"messages.fuel.level"</span><span class="p">,</span><span class="s2">"messages.vehicle.average.speed"</span><span class="p">,</span><span class="s2">"messages.engine.oil.temp"</span><span class="p">,</span><span class="s2">"messages.engine.oil.temp.high"</span><span class="p">,</span><span class="s2">"messages.doors.boot.open"</span><span class="p">,</span><span class="s2">"messages.doors.front_left.open"</span><span class="p">,</span><span class="s2">"messages.doors.front_right.open"</span><span class="p">,</span><span class="s2">"messages.doors.rear_left.open"</span><span class="p">,</span><span class="s2">"messages.doors.rear_right.open"</span><span class="p">,</span><span class="s2">"messages.windows.front_left.open"</span><span class="p">,</span><span class="s2">"messages.windows.front_right.open"</span><span class="p">,</span><span class="s2">"messages.windows.rear_left.open"</span><span class="p">,</span><span class="s2">"messages.windows.rear_right.open"</span><span class="p">,</span><span class="s2">"diagnostic_messages.engine.load"</span><span class="p">,</span><span class="s2">"diagnostic_messages.engine.coolant.temperature"</span><span class="p">,</span><span class="s2">"diagnostic_messages.fuel.pressure"</span><span class="p">,</span><span class="s2">"diagnostic_messages.intake.manifold.pressure"</span><span class="p">,</span><span class="s2">"diagnostic_messages.engine.speed"</span><span class="p">,</span><span class="s2">"diagnostic_messages.vehicle.speed"</span><span class="p">,</span><span class="s2">"diagnostic_messages.intake.air.temperature"</span><span class="p">,</span><span class="s2">"diagnostic_messages.mass.airflow"</span><span class="p">,</span><span class="s2">"diagnostic_messages.throttle.position"</span><span class="p">,</span><span class="s2">"diagnostic_messages.running.time"</span><span class="p">,</span><span class="s2">"diagnostic_messages.EGR.error"</span><span class="p">,</span><span class="s2">"diagnostic_messages.fuel.level"</span><span class="p">,</span><span class="s2">"diagnostic_messages.barometric.pressure"</span><span class="p">,</span><span class="s2">"diagnostic_messages.ambient.air.temperature"</span><span class="p">,</span><span class="s2">"diagnostic_messages.commanded.throttle.position"</span><span class="p">,</span><span class="s2">"diagnostic_messages.ethanol.fuel.percentage"</span><span class="p">,</span><span class="s2">"diagnostic_messages.accelerator.pedal.position"</span><span class="p">,</span><span class="s2">"diagnostic_messages.hybrid.battery-pack.remaining.life"</span><span class="p">,</span><span class="s2">"diagnostic_messages.engine.oil.temperature"</span><span class="p">,</span><span class="s2">"diagnostic_messages.engine.fuel.rate"</span><span class="p">,</span><span class="s2">"diagnostic_messages.engine.torque"</span><span class="p">],</span><span class="nt">"jtype"</span><span class="p">:</span><span class="s2">"afb-reply"</span><span class="p">,</span><span class="nt">"request"</span><span class="p">:{</span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="nt">"uuid"</span><span class="p">:</span><span class="s2">"32df712a-c7fa-4d58-b70b-06a87f03566b"</span><span class="p">}}</span><span class="w">
</span></code></pre>
</div>

<h2 id="write-on-can-buses">Write on CAN buses</h2>

<p>A new capability as been introcuded to be able to write on handled CAN buses.
Two modes could be used for that which is either specifying the CAN bus and a
<em>RAW</em> CAN message either by specifying a defined signal and its value.</p>

<p>Examples:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="err">#</span><span class="w"> </span><span class="err">Write</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">raw</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">frame</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">CAN</span><span class="w"> </span><span class="err">id</span><span class="w"> </span><span class="mi">0</span><span class="err">x</span><span class="mi">620</span><span class="w">
</span><span class="err">low-can</span><span class="w"> </span><span class="err">write</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"bus_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hs"</span><span class="p">,</span><span class="w"> </span><span class="nt">"frame"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"can_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1568</span><span class="p">,</span><span class="w"> </span><span class="nt">"can_dlc"</span><span class="p">:</span><span class="w">
</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="nt">"can_data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">]}</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="err">#</span><span class="w"> </span><span class="err">Write</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">signal's</span><span class="w"> </span><span class="err">value.</span><span class="w">
</span><span class="err">low-can</span><span class="w"> </span><span class="err">write</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"signal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"engine.speed"</span><span class="p">,</span><span class="w"> </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1256</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>To be able to use write capability, you need to add the permission
 <code class="highlighter-rouge">urn:AGL:permission::platform:can:write</code> to your package configuration
 file that need to write on CAN bus through <strong>low-can</strong> api.</p>

<p>Then in order to write on bus, your app needs to call verb <strong>auth</strong>
before calling <strong>write</strong>, to raise its <strong>LOA</strong>, Level Of Assurance,
which controls usage of verb <strong>write</strong>.</p>

<h2 id="using-can-utils-to-monitor-can-activity">Using CAN utils to monitor CAN activity</h2>

<p>You can watch CAN traffic and send custom CAN messages using can-utils
preinstalled on AGL target.</p>

<p>To watch watch going on a CAN bus use:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>candump can0
</code></pre>
</div>

<p>Or for an USB CAN adapter connected to porter board:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>candump can1
</code></pre>
</div>

<p>Send a custom message:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cansend can0 ID#DDDDAAAATTTTAAAA
</code></pre>
</div>

<p>You can also replay a previously dumped CAN logfiles. These logfiles can be
found in <em>can_samples</em> directory under Git repository. Following examples use
a real trip from an Auris Toyota car.</p>

<p>Trace has been recorded from a CAN device <code class="highlighter-rouge">can0</code> so you have to map it to the
correct one you use for your tests.</p>

<p>Replay on a virtual CAN device <code class="highlighter-rouge">vcan0</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>canplayer -I trip_test_with_obd2_vehicle_speed_requests <span class="nv">vcan0</span><span class="o">=</span>can0
</code></pre>
</div>

<p>Replay on a CAN device <code class="highlighter-rouge">can0</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>canplayer -I trip_test_with_obd2_vehicle_speed_requests can0
</code></pre>
</div>

<p>Replay on a CAN device <code class="highlighter-rouge">can1</code> (porter by example):</p>

<div class="highlighter-rouge"><pre class="highlight"><code>canplayer -I trip_test_with_obd2_vehicle_speed_requests <span class="nv">can1</span><span class="o">=</span>can0
</code></pre>
</div>



                </div>
            </div>
        </div>
        <div class="row">
            <div class="blue-divider"></div>
<footer>
    <div class="container-fluid">
        <div class="row">
    <div class="col-sm-9">
        <h1>More Resources</h1>
        <div class="row">
            <div class="col-sm-4">
                <h2>General</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">AGL Developer Community</a>
                    </li>
                    <li>
                        <a href="https://www.automotivelinux.org/software/download/">Download Distribution</a>
                    </li>
                    <li>
                        <a href="https://gerrit.automotivelinux.org/gerrit/#/admin/projects/">Source Code on Git</a>
                    </li>
                    <li>
                        <a target="_blank" href="/contact">Mailing List</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Development</h2>
                <ul class="nav">
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/agl-distro/source-code">Source Code</a></li>
                    <li><a target="_blank" href="https://jira.automotivelinux.org/browse/SPEC/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">Issue Tracker</a></li>
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/">Wiki</a></li>
                    <li><a href="https://www.automotivelinux.org/contact-us">Contact</a></li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Automotive Grade Linux @ Linux Foundation</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">About AGL</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.linuxfoundation.org/">About Linux Foundation</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://wiki.automotivelinux.org/start/getting-started">Join AGL community</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/about/members">Members</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-3">
        <h1>Contribute</h1>
        <p style="padding-top:20px"><strong>Help AGL move forward!</strong></p>
        <p>Report bugs, improve the docs, or contribute to the code.</p>
        <a href="/contribute" class="btn btn-lg btn-primary">
            Learn More
        </a>
        <p style="padding-top:20px"> <a href="https://twitter.com/autogradelinux" class="twitter-follow-button" data-show-count="false">Follow @autogradelinux</a></p>
    </div>
</div>
<div class="row">
	<div class="col-sm-9">
		<p class="copyright_text">
			Copyright &copy; 2015-2018 Automotive Grade Linux Documentation, Licensed under the <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
			<br/>
			Automotive Grade Linux and logos are <a target="_blank" href="http://www.linuxfoundation.org">trademarks</a> of The Linux Foundation.
			<br/>
			Initial site design from <a href="https://cordova.apache.org/">Cordova website.</a> - warm thanks !
		</p>
	</div>
    <div class="col-sm-3">
		<small class="stats">Page rendered at:  2018-07-30 00:01:43 +0000</small>
		
		<br/><small class="stats"><a href="https://git.automotivelinux.org/apps/low-level-can-service/plain/docs/3-Usage.md?h=master">Link to source document</small>
		
	</div>
</div>

    </div>
</footer>

        </div>
    </div>
</div>

<script defer type="text/javascript" src="/static/js/lib/toc.min.js"></script>
<script defer type="text/javascript" src="/static/js/docs.js"></script>

    <script defer type="text/javascript" src="/static/js/twitter.js"></script>
    



<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
    docsearch({
        apiKey: 'edd30bcff9f6df4b095c41cba3e5a418',
        indexName: 'automotivelinux',
        inputSelector: '#header-search-field',
    });
</script>

            
    

</body>
</html>
